<div class="container">
<h1 class="mensajes__titulo">MENSAJES</h1>

<div class="mensajes" *ngIf="mensajesRecibidos.length > 0">
    
        <mat-tab-group > 
                <mat-tab  label = "Recibidos" > 
                        <div *ngIf="mensajesRecibidos.length > 0">
                            <div class="mensajes__item" *ngFor="let mensaje of mensajesRecibidos" > 
                                <h4>De: {{ mensaje.remitente_id }}</h4>
                                <h4>Fecha: {{ mensaje.fecha }}</h4>
                                <p>Mensaje: {{ mensaje.cuerpo }}</p>
                                <button class="mensajes__button" mat-flat-button (click)="eliminarMensaje(mensaje.id)">Eliminar</button>
                                <mat-divider></mat-divider>
                            </div> 
                        </div>
                </mat-tab > 
                <mat-tab  label = "Enviados" >
                    <div *ngIf="mensajesEnviados.length > 0">
                        <div class="mensajes__item" *ngFor="let mensaje of mensajesEnviados"> 
                            <h4>Para: {{ mensaje.destinatario_id }}</h4>
                            <h4>Fecha: {{ mensaje.fecha }}</h4>
                            <p>Mensaje: {{ mensaje.cuerpo }}</p>
                            <button class="mensajes__button" mat-flat-button (click)="eliminarMensaje(mensaje.id)">Eliminar</button>
                            <mat-divider></mat-divider>
                        </div> 
                    </div>
                </mat-tab > 
                <mat-tab  label = "Nuevo Mensaje" >
                    <div class="mensajes__nuevo--container">
                    <form class="mensajes__nuevo" [formGroup]="mensajeNuevoForm">
                        <mat-form-field appearance="fill">
                            <mat-label>Destinatario</mat-label>
                            <mat-select formControlName="destinatario">
                            <mat-option>None</mat-option>
                            <mat-option *ngFor="let usuario of usuarios" [value]="usuario.id">{{usuario.userName}}</mat-option>
                        </mat-select>
                        </mat-form-field>
                        <mat-form-field class="example-full-width" appearance="fill">
                            <mat-label>Mensaje</mat-label>
                            <textarea matInput formControlName="mensaje" ></textarea>
                          </mat-form-field>
                        <button class="mensajes__button" mat-flat-button [disabled]="mensajeNuevoForm.invalid" (click)="enviarMensaje()">Enviar</button>
                    </form>
                </div>
                </mat-tab>
                
                
        </mat-tab-group >
    </div>
    
</div>